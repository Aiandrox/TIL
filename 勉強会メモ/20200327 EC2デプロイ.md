https://oxynotes.com/?p=5987
わかり康

/var  
もともと存在する。ここに動的ファイルを置きたい。

/var/www  
webのあれだから、クローンしたリポジトリはここに置きたい。

## いろいろ

Q. IPv4 CIDRはどうやって決めるんだろう。目安とかあるのだろうか。
なんか当てられる範囲はあるらしいけど

A. →https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/using-instance-addressing.html

VPCで当てていたのはプライベート IPv4だから、Ec2の内側のやつかな

ルートテーブルの流れ忘れてた。。

入り口（ゲートウェイ）から直で入るサブネットにだけくっつける。

Q. これってサブネット同士もつなげられる？

ルートテーブルとセキュリティグループはVPCを作ると自動的に生成されていた


## セキュリティグループ

インバウンド……サーバーにアクセスしようとするやつを制限する（ホワイトリスト）

Q. HTTP……http://で閲覧するやり方だったりする？ここを制限したら、IPアドレスでアクセス制限とかできる？  
→そんな感じっぽい！0.0.0.0/0 がv4用、::/0 がv6用

https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/security-group-rules-reference.html

SSH……鍵をつかってコマンドで入るやーつ。管理者が入るパティーン

アウトバウンド……「そのセキュリティグループに関連付けられたインスタンスからどの送信先にトラフィックを送信できるか（トラフィックの送信先と送信先ポート）を制御するルール」らしい！検索沼にはまりそう


## EC2
Q. 自動割り当てパブリック IP無効だと、もしかして一般閲覧者がアクセスできなくなる？

→少なくともこれは違う。

> パブリック IP アドレスは、Amazon のパブリック IPv4 アドレスプールからインスタンスに割り当てられ、お客様の AWS アカウントには関連付けられません。パブリック IP アドレスをインスタンスから割り当て解除すると、そのパブリック IPv4 アドレスはパブリック IP アドレスプールに戻され、再利用することはできません。
https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/using-instance-addressing.html

前言ってた「インスタンス停止開始をするたびにIPアドレスが変わる」と関係がありそうな感じ。どうしたらどうなるのかは知らん

セキュリティグループはVPC作るときに一緒に作っておいた方が設定の流れがよろしい
