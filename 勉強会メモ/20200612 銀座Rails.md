# 不安定テストを生み出すCapybaraを調教する

不安定テストとは  
GREENのはずなのになぜかREDになるテスト

- 環境の違い
- 落ちる可能性のある書き方
- 原因不明

## 落ちる可能性のある書き方

### findの挙動
ElementNotFoundのときに繰り返す→制限時間後に最後の例外を返す

はやい！メモむり！！

制限時間はデフォルト2秒なので待ち時間を伸ばす方法がある  
- デフォルトで伸ばす方法
- 要素ごとに`find '.hoge', wait: 10`

sleepじゃなくてwait使おう  
sleepは再現手法（待ち時間切れを再現）

## 対策

- CSSアニメーションを切る  
`disable_animation = true`

- assets::precompileをテスト実行前に走らせる

- ブラウザコンソール　JSのエラーをチェック  
JSのせいでオチてるのかも？

### カピバラ悪くないもん！！









